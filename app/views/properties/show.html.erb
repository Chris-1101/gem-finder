<div class="container">
  <div class="tab">
    <button class="tablinks" onclick="openCity(event, 'Property Info')">Property Info</button>
    <button class="tablinks" onclick="openCity(event, 'Average Price')">Average Price</button>
    <button class="tablinks" onclick="openCity(event, 'Crime Rates')">Crime Rates</button>
    <button class="tablinks" onclick="openCity(event, 'Market Statistics')">Market Statistics</button>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-6">
      <div id="Property Info" class="container tabcontent property_info">
        <% if @property.photo? %>
        <div class="showcard" style="background-image: url('<%= cl_image_path @property.photo, height: 300, width: 400 %>');background-size: cover;">
        </div>
         <div >
        <h5><%= @property.address  %></h5>
        <h5><strong><%= @property.price  %></strong></h5>
        <%= link_to "Track Property", trackings_path(tracking: {property_id: @property,user_id: current_user}), method: :post, class: "btn btn-danger" %>
      </div>
        <% else %>
        <div class="showcard" style="background-image: url('https://images.unsplash.com/photo-1540962351504-03099e0a754b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=cdc84c9290e90088f8ab78270ee1ffdf&auto=format&fit=crop&w=500&q=60');">
          <% end %>
        </div>

      </div>
    </div>
    <div id="Crime Rates" class="container tabcontent">
      <div class="chart-container" height:40vh; width:80vw">
        <canvas id="myChart" data-crime-rate="<%= @property.postcode.crime_rating %>"></canvas>
      </div>
    </div>
    <br>
    <br>
    <div id="Average Price" class="container tabcontent">
      <div class="chart-container" height:40vh; width:80vw">
        <canvas id="line-chart" width="800" height="450"></canvas>
      </div>
      <!-- <h3>Average Current Price: <%#= @property_details[:avg_current_first_column].first %></h3>
        <h3>Average Price per sq foot: <%#= @property_details[:avg_price_foot].first %></h3> -->
      </div>

      <br>
      <br>
      <div id="Market Statistics" class="container tabcontent">
        <div class="chart-container" height:40vh; width:80vw">
          <canvas id="pie-chart" width="800" height="450"></canvas>
        </div>
     <!--  <h3>City: <%#= @hometrack_details[:cities].first %></h3>
      <h3>Average Price: <%#= @hometrack_details[:average_price].first %></h3>
      <h3>Last 12 months: <%#= @hometrack_details[:twelve_months].first %></h3>
      <h3>Price action in the last month: <%#= @hometrack_details[:last_month].first %></h3> -->
    </div>
    <script>


    </script>
  </div>
</div>

<script>
  function openCity(evt, cityName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
  }
</script>


<%= content_for(:after_js) do %>
<%= javascript_pack_tag 'chart' %>
<% end %>



